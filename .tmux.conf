# tmux起動時のシェルをzshにする
set-option -g default-shell /bin/zsh

# tmuxを256色表示できるようにする
set-option -g default-terminal screen-256color
set -g terminal-overrides 'xterm:colors=256'

# prefixキーをC-gに変更
set -g prefix C-g

# C-bのキーバインドを解除
unbind C-b

# ステータスバーをトップに配置する
# set-option -g status-position top

# 左右のステータスバーの長さを決定する 
set-option -g status-left-length 90
set-option -g status-right-length 90

# #P => ペイン番号
# 最左に表示
set-option -g status-left '#H:[#P]'

# Wi-Fi、バッテリー残量、現在時刻
# 最右に表示
set-option -g status-right '#(wifi) #(battery --tmux) [%Y-%m-%d(%a) %H:%M]'

# ステータスバーを1秒毎に描画し直す
set-option -g status-interval 1

# センタライズ（主にウィンドウ番号など）
set-option -g status-justify centre

# ステータスバーの色を設定する
set-option -g status-bg "colour238"

# status line の文字色を指定する。
set-option -g status-fg "colour255"

# vimのキーバインドでペインを移動する
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# vimのキーバインドでペインをリサイズする
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# | でペインを縦分割する
bind | split-window -h

# - でペインを縦分割する
bind - split-window -v

# 番号基準値を変更
set-option -g base-index 1

# マウス操作を有効にする
set-option -g mouse on
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'copy-mode -e'"

# コピーモードを設定する
# コピーモードでvimキーバインドを使う
setw -g mode-keys vi

# 'v' で選択を始める
bind -T copy-mode-vi v send -X begin-selection

# 'V' で行選択
bind -T copy-mode-vi V send -X select-line

# 'C-v' で矩形選択
bind -T copy-mode-vi C-v send -X rectangle-toggle

# 'y' でヤンク
bind -T copy-mode-vi y send -X copy-selection

# 'Y' で行ヤンク
bind -T copy-mode-vi Y send -X copy-line

# 'C-p'でペースト
bind-key C-p paste-buffer






## prefixキーをC-tに変更する（好み）
#set -g prefix C-t

## C-bのキーバインドを解除する
#unbind C-b

## キーストロークのディレイを減らす
#set -sg escape-time 0
## ウィンドウのインデックスを1から始める
#set -g base-index 1
## ペインのインデックスを1から始める
#setw -g pane-base-index 1

## 設定ファイルをリロードする
#bind r source-file ~/.config/tmux/.tmux.conf \; display "Reloaded!"

## C-a*2でtmux内のプログラムにC-aを送る
#bind C-t send-prefix


## Vimのキーバインドでペインを移動する
#bind h select-pane -L
#bind j select-pane -D
#bind k select-pane -U
#bind l select-pane -R
#bind -r C-h select-window -t :-
#bind -r C-l select-window -t :+

## Vimのキーバインドでペインをリサイズする
#bind -r H resize-pane -L 5
#bind -r J resize-pane -D 5
#bind -r K resize-pane -U 5
#bind -r L resize-pane -R 5

## 256色端末を使用する
#set -g default-terminal "screen-256color"

## ステータスバーの色を設定する
#set -g status-fg white
#set -g status-bg black

## ウィンドウリストの色を設定する
#setw -g window-status-fg cyan
#setw -g window-status-bg default
#setw -g window-status-attr dim
## アクティブなウィンドウを目立たせる
#setw -g window-status-current-fg white
#setw -g window-status-current-bg red
#setw -g window-status-current-attr bright

## ペインボーダーの色を設定する
#set -g pane-border-fg green
#set -g pane-border-bg black
## アクティブなペインを目立たせる
#set -g pane-active-border-fg white
#set -g pane-active-border-bg yellow

## コマンドラインの色を設定する
#set -g message-fg white
#set -g message-bg black
#set -g message-attr bright

## ステータスバーを設定する
### 左パネルを設定する
#set -g status-left-length 40
#set -g status-left "#[fg=green]Session: #S #[fg=yellow]#I #[fg=cyan]#P"
### 右パネルを設定する
#set -g status-right "#[fg=cyan][%Y-%m-%d(%a) %H:%M]"
### ステータスバーのUTF-8サポートを有効にする
#set -g status-utf8 on
### リフレッシュの間隔を設定する(デフォルト 15秒)
#set -g status-interval 60
### ウィンドウリストの位置を中心寄せにする
#set -g status-justify centre
### ヴィジュアルノーティフィケーションを有効にする
#setw -g monitor-activity on
#set -g visual-activity on

## tpm
#set -g @tpm_plugins '              \
#  tmux-plugins/tpm                 \
#  tmux-plugins/tmux-yank           \
#  tmux-plugins/tmux-open           \
#  tmux-plugins/tmux-resurrect      \
#  tmux-plugins/tmux-battery        \
#  tmux-plugins/tmux-pain-control   \
#'

#run-shell '~/.tmux/plugins/tpm/tpm'





### ================================
###  基本設定
### ================================
### プレフィックスキーをCtrl+tに変更
##set -g prefix C-t
##unbind C-b
### ペイン分割のキーバインド
### bind | split -h =====> %
### bind - split -v =====> "

### Vimライクなペイン移動
##bind h select-pane -L
##bind j select-pane -D
##bind k select-pane -U
##bind l select-pane -R

### キーストロークのディレイを減らす
##set -sg escape-time 0

### ウィンドウとペインのインデックスを1から始める
##set -g base-index 1
##setw -g pane-base-index 1
### TERM 環境変数のデフォルト値を変更 (MUST)
#### デフォルトは screen なので、端末エミューレーターに合わせて変更
### set -s default-terminal 'xterm-256color'
##set -s default-terminal 'alacritty'

### エスケープキー入力後の待ち時間 (MAY)
#### デフォルトの 500 ミリ秒が長ければ短くする
##set -s escape-time 10

### マウス操作を有効に (SHOULD)
#### コピーモードはマウス操作の方が圧倒的に便利なので推奨
##set -g mouse on

### プラグインリスト
##set -g @plugin 'tmux-plugins/tpm'
##set -g @plugin 'tmux-plugins/tmux-sensible'

### プラグインマネージャの初期化
##run '~/.tmux/plugins/tpm/tpm'

##bind-key -n Home send Escape "OH"
##bind-key -n End send Escape "OF"


### ================================
###  コピーモード
### ================================

### コピーモードでバッファにコピーされた内容をクリップボードへ送る (tmux 3.2 〜 用) (SHOULD)
### if-shell 'which xsel'   'set -s copy-command "xsel -i"'
### if-shell 'which pbcopy' 'set -s copy-command "pbcopy"'

### コピーモードでバッファにコピーされた内容をクリップボードへ送る (tmux 2.4 〜 3.1 用) (SHOULD)
##if-shell 'which xsel' '\
##  bind -Tcopy-mode-vi C-j               send -X copy-pipe-and-cancel "xsel -i"; \
##  bind -Tcopy-mode-vi Enter             send -X copy-pipe-and-cancel "xsel -i"; \
##  bind -Tcopy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "xsel -i"; \
##'
##if-shell 'which pbcopy' '\
##  bind -Tcopy-mode-vi C-j               send -X copy-pipe-and-cancel "pbcopy"; \
##  bind -Tcopy-mode-vi Enter             send -X copy-pipe-and-cancel "pbcopy"; \
##  bind -Tcopy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"; \
##'


### ================================
###  ステータスライン
### ================================

### ステータスバーの色を設定する (MAY)
#### 緑から灰色に変更
##set -g status-style bg=colour208,fg=white

### 左ステータスの最大幅 (MAY)
#### 表示項目を増やすため
##set -g status-left-length 30

### 左ステータス: セッション番号、ペイン名（ホスト名） (MAY)
#### ssh する度に pane_title に接続先のホスト名が表示されます
#### ただし、更新は接続時のみで、切断時は更新されない点に注意
##set -g status-left '\
###[bg=colour024,fg=colour255] #S \
###[bg=colour054,fg=colour255] #{=21:pane_title} '

### 右ステータス: システム時計 (MAY)
#### 日付フォーマットを変更
##set -g status-right '\
###{?window_bigger,[#{window_offset_x}#,#{window_offset_y}] ,} \
##%Y-%m-%d(%a) %H:%M'

### 中ステータス: ウィンドウ情報 (MAY)
#### アクティブなウィンドウ情報を強調表示
##setw -g window-status-separator ''
##setw -g window-status-current-style bg=colour239,bold
##setw -g window-status-current-format ' \
###[fg=colour119]#I\
###[fg=colour249]:\
###[fg=colour255]#W\
###[fg=colour249]#F\
## '
##setw -g window-status-style bg=default
##setw -g window-status-format ' \
###[fg=colour244]#I\
###[fg=colour237]:\
###[fg=colour250]#W\
###[fg=colour244]#F\
## '


### ================================
###  ペイン
### ================================

### ペイン ボーダー (MAY)
#### 通常の枠線を灰色に、アクティブな場合は白に
##setw -g pane-border-style        bg=default,fg=colour002
##setw -g pane-active-border-style bg=default,fg=colour208
